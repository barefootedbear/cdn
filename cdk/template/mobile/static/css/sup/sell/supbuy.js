$(function(){$("#chongMenu \x3e .tab-item:first").addClass("active");$("#chongMenu \x3e .tab-item.active").click()});var facer=$("#chongFacerGroup").html(),url="",cardprice="";function selectKind(a,d){"chongCost"==d?(url="",$("#chongPrimary").addClass("chong-primary-nocard"),$("#chongBg").attr("class","chong-bg"),$("#congType").hide(),$("#chongPrimary").removeClass("chong-primary-loader"),$("#chongFacerGroup").addClass("disabled"),$("#chongFacerGroup").html(facer),$("#accountImg").hide(),$("#accountTips").show()):(url="/supapi/sell/trad?id\x3d",$("#chongPrimary").removeClass("chong-primary-nocard"),$("#congType").show(),$("#chongFacerGroup").removeClass("disabled"),$("#accountImg").show(),$("#accountTips").hide(),$("#oilCell").hide(),$("#chongTips").show());$(a).addClass("active").siblings().removeClass("active");$("#chongCard \x3e .tab-panel").removeClass("active");$("#chongCard \x3e #"+d).addClass("active");$("#chongCard .chong-group \x3e li").removeClass("active");$("#chongCard \x3e #"+d).find(".chong-group \x3e li:first").addClass("active");$("#chongCard \x3e #"+d).find(".chong-group \x3e li.active \x3e .chong-card").click();selectMore("#chongBackdrop")}function selectCard(a,d){var c=$(a).closest(".chong-group");c.next(".chong-more");var e=$(a).parent("li").index();c.hasClass("chong-group-pc")||3<e&&$(a).parent("li").insertBefore(c.find("li:eq(3)"));$(".chong-group \x3e li").removeClass("active");$(a).parent("li").addClass("active");$("#chongBg").attr("class","chong-bg chong-bg-"+d);$("#accountImg").attr("src",$(a).find("img").attr("src"));$("#chongPrimary .form-control").val("");selectMore("#chongBackdrop");$.get(url+d+"\x26_\x3d"+Math.random(),function(b){cardprice=b;if(null==b.list)return $("#chongPrimary").addClass("chong-primary-loader"),!1;var a="";$.each(b.list,function(c){a=""!=b.list[c].sub?a+'\x3cdiv class\x3d"tab-item" onclick\x3d"selectType(this,\''+c+"');\"\x3e\x3cspan\x3e"+b.list[c].name+"\x3c/span\x3e\x3csmall\x3e"+b.list[c].sub+"\x3c/small\x3e\x3c/div\x3e":a+'\x3cdiv class\x3d"tab-item" onclick\x3d"selectType(this,\''+c+'\');"\x3e\x3cspan class\x3d"nosub"\x3e'+b.list[c].name+"\x3c/span\x3e\x3c/div\x3e"});$("#congTypeTabs").empty().html(a);delete a;$("[name\x3d'tradid']").val(b.tradid);$("#chongPrimary").removeClass("chong-primary-loader");$("#congTypeTabs \x3e .tab-item:first").addClass("active");$("#congTypeTabs \x3e .tab-item.active").click();$("#chongLoader").hide();$("#chongFormer").fadeIn()},"json")}function selectType(a,d){var c="",e=cardprice.list[d],b=e.card.attinfo[0].split("|");$(a).addClass("active").siblings().removeClass("active");$("#chongFacer").addClass("chong-facer-loader");$.each(e.lid,function(a,b){c=0!=b.tnum?c+'\x3cli\x3e\x3ca href\x3d"javascript:;" onclick\x3d"selectFacer(this,'+a+');" val\x3d"'+a+'"\x3e\x3cspan class\x3d"price-value"\x3e'+b.name+'\x3c/span\x3e\x3cspan class\x3d"price-selling"\x3e\u552e\u4ef7\x3cspan\x3e'+b.discount.price+"\x3c/span\x3e\u5143\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e":c+'\x3cli class\x3d"disabled"\x3e\x3ca href\x3d"javascript:;"\x3e\x3cspan class\x3d"price-value"\x3e'+b.name+"\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e"});$("#chongFacerGroup").empty().html(c).removeClass("disabled");delete c;$("#chongPrimary .form-control").attr({name:b[1],id:b[1],reg:b[3],placeholder:"\u8bf7\u8f93\u5165"+b[0],err:b[0]+"\u683c\u5f0f\u9519\u8bef","null":b[0]+"\u4e0d\u80fd\u4e3a\u7a7a"});0==b[2]&&$("#chongPrimary .form-control").removeAttr("null");"\u624b\u673a\u53f7"==b[0]||"QQ\u53f7\u7801"==b[0]||"\u52a0\u6cb9\u5361\u53f7"==b[0]?($("#chongPrimary .form-control").prop("type","tel"),"\u624b\u673a\u53f7"==b[0]&&$("#chongPrimary .form-control").attr("maxlength","11"),"QQ\u53f7\u7801"==b[0]&&$("#chongPrimary .form-control").attr("maxlength","10"),"\u52a0\u6cb9\u5361\u53f7"==b[0]&&$("#chongPrimary .form-control").attr("maxlength","19")):$("#chongPrimary .form-control").prop({maxlength:"30",type:"text"});$("[name\x3d'lid']").val(d.replace("ID_",""));$("#chongFacer").removeClass("chong-facer-loader");$("#chongFacerGroup \x3e li:not(.disabled):first").addClass("active");$("#chongFacerGroup \x3e li:not(.disabled).active \x3e a").click()}function selectFacer(a,d){var c=$(a).attr("max"),e=$(a).find(".price-selling \x3e span").text();$(a).parent("li").addClass("active").siblings().removeClass("active");$('[name\x3d"sid"]').val(d);$("#tradPrice").text(e);0==c?$("#chongBtn").addClass("disabled").prop("disabled",!0):$("#chongBtn").removeClass("disabled").prop("disabled",!1)}function selectCost(a,d){$("#chongPrimary .form-control").val("").focus();$(".chong-group \x3e li").removeClass("active");$(a).parent("li").addClass("active");"cost"==d?($("#oilCell").hide(),$("#chongTips").show(),$("#chongPrimary .form-control").attr({name:"account",id:"idCost",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",err:"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u9519\u8bef","null":"\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a",maxlength:"11"})):($("#oilCell").show(),$("#chongTips").hide(),$("#chongPrimary .form-control").attr({name:"account",id:"idOil",placeholder:"\u8bf7\u8f93\u5165\u52a0\u6cb9\u5361\u53f7",err:"\u52a0\u6cb9\u5361\u53f7\u683c\u5f0f\u9519\u8bef","null":"\u52a0\u6cb9\u5361\u53f7\u4e0d\u80fd\u4e3a\u7a7a",maxlength:"19"}));$("#chongLoader").hide();$("#chongFormer").fadeIn()}function getPrice(a,d){var c=$(a).val(),e,b;"cost"==d?(e=/^1[3456789]{1}\d{9}$/,b=11,url="/supapi/sell/trad?type\x3dphone\x26id\x3d"):(e=/^[0-9]{19}$/,b=19,url="/supapi/sell/trad?type\x3doil\x26id\x3d");if(c.length<b)"cost"==d?$("#accountTips").text("48\u5c0f\u65f6\u5185\u5230\u8d26"):$("#oilTips").html('\x3cstrong\x3e\u53ea\u80fd\u5145\x3cspan class\x3d"label label-primary"\x3e\u4e3b\u5361\x3c/span\x3e\uff0c\u526f\u5361\u548c\u5b57\u6bcd\u5f00\u5934\u7684\u52a0\u6cb9\u5361\u4e0d\u80fd\u5145\u503c\x3c/strong\x3e'),$("#chongFacerGroup").empty().html(facer).addClass("disabled"),$("#chongBtn").prop("disabled",!0).addClass("disabled");else if(c.length==b)if(e.test(c))$.get(url+c+"\x26_\x3d"+Math.random(),function(a){if(null==a.list)"cost"==d?$("#accountTips").text(a.msg):$("#oilTips").html('\x3cspan class\x3d"text-red"\x3e'+a.msg+"\x3c/span\x3e");else{var b="";"cost"==d&&$("#accountTips").text(a.op);$("[name\x3d'tradid']").val(a.tradid);$("[name\x3d'accountold']").val(c);$.each(a.list,function(c){$("[name\x3d'lid']").val(c.replace("ID_",""));$.each(a.list[c].lid,function(a,c){b=0!=c.tnum?b+'\x3cli\x3e\x3ca href\x3d"javascript:;" onclick\x3d"selectFacer(this,'+a+');" val\x3d"'+a+'"\x3e\x3cspan class\x3d"price-value"\x3e\x3cstrong\x3e'+c.name+'\x3c/strong\x3e\x3c/span\x3e\x3cspan class\x3d"price-selling"\x3e\u552e\u4ef7\x3cspan\x3e'+c.discount.price+"\x3c/span\x3e\u5143\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e":b+'\x3cli class\x3d"disabled"\x3e\x3ca href\x3d"javascript:;"\x3e\x3cspan class\x3d"price-value"\x3e\x3cstrong\x3e'+c.name+"\x3c/strong\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e"})});$("#chongBtn").prop("disabled",!1).removeClass("disabled");$("#chongFacerGroup").empty().html(b).removeClass("disabled");$("#chongFacerGroup \x3e li:not(.disabled):first").addClass("active");$("#chongFacerGroup \x3e li:not(.disabled).active \x3e a").click();delete b}},"json");else return"cost"==d?$("#accountTips").text("\u6682\u4e0d\u652f\u6301\u6b64\u53f7\u5145\u503c"):$("#oilTips").html('\x3cstrong\x3e\u53ea\u80fd\u5145\x3cspan class\x3d"label label-primary"\x3e\u4e3b\u5361\x3c/span\x3e\uff0c\u526f\u5361\u548c\u5b57\u6bcd\u5f00\u5934\u7684\u52a0\u6cb9\u5361\u4e0d\u80fd\u5145\u503c\x3c/strong\x3e'),$("#chongFacerGroup").empty().html(facer).addClass("disabled"),$("#chongBtn").prop("disabled",!0).addClass("disabled"),!1}function selectMore(a){$(a).hasClass("chong-more")?$(a).hasClass("open")?($(a).removeClass("open"),$(a).prev(".chong-group").removeClass("open"),$("#chongBackdrop").removeClass("in")):($(a).addClass("open"),$(a).prev(".chong-group").addClass("open"),$("#chongBackdrop").addClass("in")):$(a).hasClass("in")&&($(a).removeClass("in"),$(".chong-more.open").removeClass("open"),$(".chong-group.open").removeClass("open"))}function foramtPhoneNum(a,d){var c=$(d).val();if(/^[\d\s]+$/.test(c)){for(var c=c.replace(/\s*/g,""),e=[],b=0;b<c.length;b++)3==b||7==b?e.push(" "+c.charAt(b)):e.push(c.charAt(b));d.value=e.join("")}else c=c.replace(/[^\d\s]/g,""),$(d).val(c)}function paycheck(a,d){$("#modal-prompt").width(550).modal({title:"\u8bf7\u5b8c\u6210\u4ed8\u6b3e",modal:!0});$("#newhref").attr("href",a);window.location.href=a};